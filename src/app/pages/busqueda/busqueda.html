<div class="busqueda-page">
  <div class="container">
    <!-- Header Section -->
    <div class="search-header">
      <h1 class="page-title text-gradient">B√∫squeda Avanzada</h1>
      <p class="page-subtitle">
        Encuentra contenido espec√≠fico usando filtros avanzados
      </p>
    </div>

    <!-- Search Box -->
    <div class="search-box glass">
      <div class="search-input-wrapper">
        <span class="search-icon">üîç</span>
        <input type="text" class="search-input" placeholder="Buscar elementos, navegaci√≥n, conceptos..."
          [(ngModel)]="query" (input)="doSearch()" autocomplete="off" />
        <button *ngIf="query.length > 0" class="clear-button" (click)="clear()" title="Limpiar b√∫squeda">
          ‚úï
        </button>
      </div>

      <!-- Filters -->
      <div class="filters">
        <div class="filter-group">
          <label class="filter-label">Tipo:</label>
          <div class="filter-options">
            <button class="filter-chip" [class.active]="filters.type === 'todos'"
              (click)="filters.type = 'todos'; doSearch()">
              Todos
            </button>
            <button class="filter-chip" [class.active]="filters.type === 'pagina'"
              (click)="filters.type = 'pagina'; doSearch()">
              P√°ginas
            </button>
            <button class="filter-chip" [class.active]="filters.type === 'seccion'"
              (click)="filters.type = 'seccion'; doSearch()">
              Secciones
            </button>
          </div>
        </div>

        <div class="filter-group">
          <label class="filter-label">Secci√≥n:</label>
          <select class="filter-select" [(ngModel)]="filters.section" (change)="doSearch()">
            <option value="todas">Todas las secciones</option>
            <option *ngFor="let section of sections" [value]="section">{{ section }}</option>
          </select>
        </div>
      </div>

      <div class="search-actions">
        <button class="btn btn-primary" (click)="doSearch()">Buscar</button>
        <button class="btn btn-outline" (click)="clear()">Limpiar</button>
      </div>
    </div>

    <!-- Results -->
    <div class="results-container">
      <ng-container *ngIf="results$ | async as results">
        <div class="search-stats" *ngIf="query || filters.type !== 'todos' || filters.section !== 'todas'">
          <p class="stats-text">
            Se encontraron <strong>{{ results.length }}</strong> resultado{{ results.length === 1 ? '' : 's' }}
          </p>
        </div>

        <div class="results-grid" *ngIf="results.length > 0">
          <div *ngFor="let item of results" class="result-card card glass card-hover">
            <div class="result-header">
              <span class="result-badge" [class]="'badge-' + item.type">
                {{ item.type }}
              </span>
              <h3 class="result-title">{{ item.title }}</h3>
            </div>

            <p class="result-description">{{ item.description }}</p>

            <div class="result-meta">
              <span class="result-section">üìÅ {{ item.section }}</span>
            </div>

            <div class="result-keywords">
              <span *ngFor="let keyword of item.keywords.slice(0, 5)" class="keyword-tag">
                {{ keyword }}
              </span>
            </div>

            <a [routerLink]="item.path" class="result-link">
              Ver p√°gina
              <span class="arrow">‚Üí</span>
            </a>
          </div>
        </div>

        <div class="no-results"
          *ngIf="results.length === 0 && (query || filters.type !== 'todos' || filters.section !== 'todas')">
          <div class="no-results-icon">üîç</div>
          <h3 class="no-results-title">No se encontraron resultados</h3>
          <p class="no-results-text">
            Intenta con otros t√©rminos de b√∫squeda o ajusta los filtros
          </p>
          <button class="btn btn-outline" (click)="clear()">
            Limpiar filtros
          </button>
        </div>

        <div class="initial-state"
          *ngIf="results.length === 0 && !query && filters.type === 'todos' && filters.section === 'todas'">
          <div class="initial-icon">üí°</div>
          <h3 class="initial-title">Comienza a buscar</h3>
          <p class="initial-text">
            Escribe palabras clave o usa los filtros para encontrar contenido espec√≠fico
          </p>
        </div>
      </ng-container>
    </div>
  </div>
</div>